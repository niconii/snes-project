                ;; SNES memory map setting
snes_mapper     := "lorom"

lorom           .segment
                snes_mapper := "lorom"
                .endsegment

hirom           .segment
                snes_mapper := "hirom"
                .endsegment

org             .macro addr
                .if snes_mapper == "lorom"
                    rom_addr = (\addr & $7f0000) >> 1 | \addr & $007fff
                .elsif snes_mapper == "hirom"
                    rom_addr = \addr & $3fffff
                .endif
                * = \addr
                .offs rom_addr - *
                .endmacro

                ;; RGB functions
rgb             .sfunction r, g, b, (b << 10 | g << 5 | r)
rgb24           .sfunction r, g, b, rgb(r >> 3, g >> 3, b >> 3)

                ;; MMIO registers
INIDISP         = $802100
OBSEL           = $802101
OAMADDL         = $802102
OAMADDH         = $802103
OAMDATA         = $802104
BGMODE          = $802105
MOSAIC          = $802106
BG1SC           = $802107
BG2SC           = $802108
BG3SC           = $802109
BG4SC           = $80210A
BG12NBA         = $80210B
BG34NBA         = $80210C
BG1HOFS         = $80210D
BG1VOFS         = $80210E
BG2HOFS         = $80210F
BG2VOFS         = $802110
BG3HOFS         = $802111
BG3VOFS         = $802112
BG4HOFS         = $802113
BG4VOFS         = $802114
VMAIN           = $802115
VMADDL          = $802116
VMADDH          = $802117
VMDATAL         = $802118
VMDATAH         = $802119
M7SEL           = $80211A
M7A             = $80211B
M7B             = $80211C
M7C             = $80211D
M7D             = $80211E
M7X             = $80211F
M7Y             = $802120
CGADD           = $802121
CGDATA          = $802122
W12SEL          = $802123
W34SEL          = $802124
WOBJSEL         = $802125
WH0             = $802126
WH1             = $802127
WH2             = $802128
WH3             = $802129
WBGLOG          = $80212A
WOBJLOG         = $80212B
TM              = $80212C
TS              = $80212D
TMW             = $80212E
TSW             = $80212F
CGWSEL          = $802130
CGADSUB         = $802131
COLDATA         = $802132
SETINI          = $802133
MPYL            = $802134
MPYM            = $802135
MPYH            = $802136
SLHV            = $802137
RDOAM           = $802138
RDVRAML         = $802139
RDVRAMH         = $80213A
RDCGRAM         = $80213B
OPHCT           = $80213C
OPVCT           = $80213D
STAT77          = $80213E
STAT78          = $80213F
APUI00          = $802140
APUI01          = $802141
APUI02          = $802142
APUI03          = $802143
WMDATA          = $802180
WMADDL          = $802181
WMADDM          = $802182
WMADDH          = $802183
JOYWR           = $804016
JOYA            = $804016
JOYB            = $804017
NMITIMEN        = $804200
WRIO            = $804201
WRMPYA          = $804202
WRMPYB          = $804203
WRDIVL          = $804204
WRDIVH          = $804205
WRDIVB          = $804206
HTIMEL          = $804207
HTIMEH          = $804208
VTIMEL          = $804209
VTIMEH          = $80420A
MDMAEN          = $80420B
HDMAEN          = $80420C
MEMSEL          = $80420D
RDNMI           = $804210
TIMEUP          = $804211
HVBJOY          = $804212
RDIO            = $804213
RDDIVL          = $804214
RDDIVH          = $804215
RDMPYL          = $804216
RDMPYH          = $804217
JOY1L           = $804218
JOY1H           = $804219
JOY2L           = $80421A
JOY2H           = $80421B
JOY3L           = $80421C
JOY3H           = $80421D
JOY4L           = $80421E
JOY4H           = $80421F
DMAP0           = $804300
BBAD0           = $804301
A1T0L           = $804302
A1T0H           = $804303
A1B0            = $804304
DAS0L           = $804305
DAS0H           = $804306
DASB0           = $804307
A2A0L           = $804308
A2A0H           = $804309
NTRL0           = $80430A
UNUSED0         = $80430B
DMAP1           = $804310
BBAD1           = $804311
A1T1L           = $804312
A1T1H           = $804313
A1B1            = $804314
DAS1L           = $804315
DAS1H           = $804316
DASB1           = $804317
A2A1L           = $804318
A2A1H           = $804319
NTRL1           = $80431A
UNUSED1         = $80431B
DMAP2           = $804320
BBAD2           = $804321
A1T2L           = $804322
A1T2H           = $804323
A1B2            = $804324
DAS2L           = $804325
DAS2H           = $804326
DASB2           = $804327
A2A2L           = $804328
A2A2H           = $804329
NTRL2           = $80432A
UNUSED2         = $80432B
DMAP3           = $804330
BBAD3           = $804331
A1T3L           = $804332
A1T3H           = $804333
A1B3            = $804334
DAS3L           = $804335
DAS3H           = $804336
DASB3           = $804337
A2A3L           = $804338
A2A3H           = $804339
NTRL3           = $80433A
UNUSED3         = $80433B
DMAP4           = $804340
BBAD4           = $804341
A1T4L           = $804342
A1T4H           = $804343
A1B4            = $804344
DAS4L           = $804345
DAS4H           = $804346
DASB4           = $804347
A2A4L           = $804348
A2A4H           = $804349
NTRL4           = $80434A
UNUSED4         = $80434B
DMAP5           = $804350
BBAD5           = $804351
A1T5L           = $804352
A1T5H           = $804353
A1B5            = $804354
DAS5L           = $804355
DAS5H           = $804356
DASB5           = $804357
A2A5L           = $804358
A2A5H           = $804359
NTRL5           = $80435A
UNUSED5         = $80435B
DMAP6           = $804360
BBAD6           = $804361
A1T6L           = $804362
A1T6H           = $804363
A1B6            = $804364
DAS6L           = $804365
DAS6H           = $804366
DASB6           = $804367
A2A6L           = $804368
A2A6H           = $804369
NTRL6           = $80436A
UNUSED6         = $80436B
DMAP7           = $804370
BBAD7           = $804371
A1T7L           = $804372
A1T7H           = $804373
A1B7            = $804374
DAS7L           = $804375
DAS7H           = $804376
DASB7           = $804377
A2A7L           = $804378
A2A7H           = $804379
NTRL7           = $80437A
UNUSED7         = $80437B
